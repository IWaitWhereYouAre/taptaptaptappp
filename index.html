<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>ISA Pulse</title>
  <style>
    :root {
      --bg: #000;
      --primary: #d85a7a;
      --gold: #c5a059;
    }
    body, html { 
      margin: 0; padding: 0; height: 100%; 
      background: var(--bg); color: white;
      font-family: 'Inter', system-ui, sans-serif;
      overflow: hidden; display: flex; justify-content: center; align-items: center;
    }
    #game-ui { text-align: center; transition: opacity 0.5s; }
    
    /* The Pulse Circle */
    .pulse-container {
      position: relative; width: 200px; height: 200px;
      display: flex; justify-content: center; align-items: center;
    }
    .ring {
      position: absolute; border: 2px solid var(--primary);
      border-radius: 50%; opacity: 0.5;
    }

    /* Message Styles */
    #welcome-screen {
      position: fixed; inset: 0; display: none;
      flex-direction: column; justify-content: center; align-items: center;
      background: var(--gold); color: #1b1b1f; padding: 20px;
      animation: flashIn 0.5s ease-out forwards;
    }
    h1 { font-size: 3rem; margin: 0; text-transform: uppercase; letter-spacing: -2px; }
    p { font-size: 1.2rem; font-weight: bold; }

    @keyframes flashIn {
      from { opacity: 0; transform: scale(0.8); }
      to { opacity: 1; transform: scale(1); }
    }

    #timer { font-family: monospace; font-size: 14px; color: var(--primary); margin-top: 20px; }
  </style>
</head>
<body>

  <div id="game-ui">
    <p>Tap when the rings meet the center</p>
    <div class="pulse-container" id="pulse-area">
      <div class="ring" id="ring1"></div>
      <div id="core">‚ù§Ô∏è</div>
    </div>
    <div id="timer">Syncing...</div>
  </div>

  <div id="welcome-screen">
    <h1>BOOM ‚ú®</h1>
    <p>ISA warmly welcome you guys!</p>
    <div style="font-size: 5rem;">üëãüòä</div>
  </div>

<script>
  const welcome = document.getElementById('welcome-screen');
  const gameUI = document.getElementById('game-ui');
  const timerDisplay = document.getElementById('timer');
  const ring1 = document.getElementById('ring1');
  const core = document.getElementById('core');

  // --- GLOBAL SYNC LOGIC ---
  // The game ends at the next "even" 2-minute mark (e.g. 2:02, 2:04, 2:06)
  const ROUND_DURATION = 120000; // 2 Minutes
  let endTime = Math.ceil(Date.now() / ROUND_DURATION) * ROUND_DURATION;
  
  const PULSE_SPEED = 2000; // One pulse every 2 seconds

  function loop() {
    const now = Date.now();
    const timeLeft = endTime - now;
    const pulseProgress = (now % PULSE_SPEED) / PULSE_SPEED;

    // 1. Synchronized Animation
    // Rings shrink from 200px to 40px globally
    const size = 200 - (pulseProgress * 160);
    const opacity = pulseProgress;
    ring1.style.width = ring1.style.height = size + 'px';
    ring1.style.opacity = opacity;
    core.style.transform = `scale(${1.2 - (pulseProgress * 0.4)})`;

    // 2. Synchronized Timer
    if (timeLeft <= 0) {
      showBoom();
      return;
    }
    
    const seconds = Math.floor(timeLeft / 1000);
    timerDisplay.innerText = `ISA CONNECTION IN: ${seconds}s`;

    requestAnimationFrame(loop);
  }

  function showBoom() {
    gameUI.style.display = 'none';
    welcome.style.display = 'flex';
    // Vibration for haptic "Boom"
    if (navigator.vibrate) navigator.vibrate([200, 100, 200]);
  }

  // Visual feedback for tapping
  document.body.addEventListener('touchstart', (e) => {
    e.preventDefault();
    core.style.color = '#fff';
    setTimeout(() => core.style.color = '', 100);
  });

  loop();
</script>
</body>
</html>
